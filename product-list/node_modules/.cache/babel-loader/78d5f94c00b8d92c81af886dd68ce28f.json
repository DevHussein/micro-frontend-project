{"ast":null,"code":"var _jsxFileName = \"/Users/hussainalsabr/Desktop/My Files/Self Development/typescript-projects/Mastering-TypeScript-Fourth-Edition/ch16/product-list/src/App.tsx\";\nimport React from 'react';\nimport './App.css';\nimport { CollectionView } from './CollectionView';\nimport { DetailView } from './DetailView';\nimport { Collection } from './Products';\nimport { ajax } from 'rxjs/ajax';\nimport { CircularProgress } from \"@material-ui/core\";\nimport * as _ from \"underscore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport let microEventBus = window.microEventBus;\n;\n// this class instance will now be part of the App state\n// const collectionInstance = new Collection();\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.showDetailView = this.showDetailView.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n    this.state = {\n      showDetails: false,\n      product: null,\n      collectionInstance: new Collection(),\n      username: \"\"\n    };\n  }\n  componentDidMount() {\n    this.processUserLoginEvent = this.processUserLoginEvent.bind(this);\n\n    // console.log(`window.broadcastService : ${(window as any).broadcastService}`)\n    // console.log(`messageBus : ${broadcastService}`)\n\n    microEventBus.on('user-logged-in').subscribe(this.processUserLoginEvent);\n    ajax.getJSON(\"http://127.0.0.1:3000/products\").subscribe(data => {\n      let collection = new Collection();\n      collection.items = data;\n      this.setState({\n        showDetails: false,\n        product: null,\n        collectionInstance: collection\n      });\n    });\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [this.state.collectionInstance.items.length < 1 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"App-header\",\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 21\n      }, this) : \"\", /*#__PURE__*/_jsxDEV(CollectionView\n      // {...collectionInstance}\n      // replaced with:\n      , {\n        ...this.state.collectionInstance,\n        handleItemClicked: this.showDetailView\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(DetailView, {\n        open: this.state.showDetails,\n        product: this.state.product,\n        handleClose: this.handleClose,\n        username: this.state.username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this);\n  }\n  showDetailView(id) {\n    console.log(`App.handleClick() called`);\n    let foundItem = _.find(this.state.collectionInstance.items, item => {\n      return item.id === id;\n    });\n    if (foundItem) {\n      this.setState({\n        showDetails: true,\n        product: foundItem,\n        username: this.state.username\n      });\n    }\n  }\n  handleClose() {\n    console.log(`App : handleClose()`);\n    this.setState({\n      showDetails: false,\n      product: null\n    });\n  }\n  processUserLoginEvent(event) {\n    console.log(`RCT : App.processUserLoginEvent : ${event}`);\n    if (event) {\n      this.setState({\n        username: event\n      });\n    }\n  }\n}\nexport default App;","map":{"version":3,"names":["React","CollectionView","DetailView","Collection","ajax","CircularProgress","_","jsxDEV","_jsxDEV","microEventBus","window","App","Component","constructor","props","showDetailView","bind","handleClose","state","showDetails","product","collectionInstance","username","componentDidMount","processUserLoginEvent","on","subscribe","getJSON","data","collection","items","setState","render","children","length","className","fileName","_jsxFileName","lineNumber","columnNumber","handleItemClicked","open","id","console","log","foundItem","find","item","event"],"sources":["/Users/hussainalsabr/Desktop/My Files/Self Development/typescript-projects/Mastering-TypeScript-Fourth-Edition/ch16/product-list/src/App.tsx"],"sourcesContent":["import React from 'react';\nimport './App.css';\nimport { CollectionView } from './CollectionView';\nimport { DetailView } from './DetailView';\nimport { Collection, IProduct } from './Products';\nimport { ajax } from 'rxjs/ajax';\n\nimport { CircularProgress } from \"@material-ui/core\";\nimport * as _ from \"underscore\";\nimport { MicroEventBus } from 'micro-event-bus';\nexport let microEventBus: MicroEventBus = (window as any).microEventBus;\n\nexport interface IAppProps { };\nexport interface IAppState {\n    showDetails: boolean;\n    product: IProduct | null;\n    collectionInstance: Collection;\n    username: string;\n}\n\n// this class instance will now be part of the App state\n// const collectionInstance = new Collection();\n\nclass App extends\n    React.Component<IAppProps, IAppState> {\n\n    constructor(props: IAppProps) {\n        super(props);\n        this.showDetailView =\n            this.showDetailView.bind(this);\n        this.handleClose = this.handleClose.bind(this);\n\n        this.state = {\n            showDetails: false,\n            product: null,\n            collectionInstance: new Collection(),\n            username: \"\"\n        };\n\n\n    }\n\n    componentDidMount() {\n        this.processUserLoginEvent = this.processUserLoginEvent.bind(this);\n\n        // console.log(`window.broadcastService : ${(window as any).broadcastService}`)\n        // console.log(`messageBus : ${broadcastService}`)\n\n        microEventBus.on('user-logged-in').subscribe(\n            this.processUserLoginEvent\n        );\n\n        ajax.getJSON(\"http://127.0.0.1:3000/products\")\n            .subscribe((data) => {\n                let collection = new Collection();\n                collection.items = data as IProduct[];\n                this.setState({\n                    showDetails: false,\n                    product: null,\n                    collectionInstance: collection\n                });\n            });\n    }\n\n    render() {\n        return (\n            <div>\n                { this.state.collectionInstance.items.length < 1 ?\n                    <div className=\"App-header\">\n                        <CircularProgress />\n                    </div>\n                    : \"\"}\n                <CollectionView\n                    // {...collectionInstance}\n                    // replaced with:\n                    {...this.state.collectionInstance}\n                    handleItemClicked={this.showDetailView} >\n                </CollectionView>\n                <DetailView open={this.state.showDetails}\n                    product={this.state.product}\n                    handleClose={this.handleClose}\n                    username={this.state.username}\n                ></DetailView>\n            </div>\n        )\n    }\n    showDetailView(id: number) {\n        console.log(`App.handleClick() called`);\n        let foundItem = _.find(\n            this.state.collectionInstance.items,\n            (item: IProduct) => {\n                return item.id === id\n            });\n\n        if (foundItem) {\n\n            this.setState({\n                showDetails: true,\n                product: foundItem,\n                username: this.state.username\n            });\n        }\n\n    }\n    handleClose() {\n        console.log(`App : handleClose()`);\n        this.setState({\n            showDetails: false,\n            product: null\n        })\n    }\n    processUserLoginEvent(event: string | undefined) {\n        console.log(`RCT : App.processUserLoginEvent : ${event}`);\n\n        if (event) {\n            this.setState({ username: event });\n        }\n    }\n}\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"remainingRequest":"/Users/hussainalsabr/Desktop/My Files/Self Development/typescript-projects/Mastering-TypeScript-Fourth-Edition/ch16/shopping-cart/node_modules/ts-loader/index.js??ref--12-1!/Users/hussainalsabr/Desktop/My Files/Self Development/typescript-projects/Mastering-TypeScript-Fourth-Edition/ch16/shopping-cart/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hussainalsabr/Desktop/My Files/Self Development/typescript-projects/Mastering-TypeScript-Fourth-Edition/ch16/shopping-cart/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/hussainalsabr/Desktop/My Files/Self Development/typescript-projects/Mastering-TypeScript-Fourth-Edition/ch16/shopping-cart/src/App.vue?vue&type=script&lang=ts","dependencies":[{"path":"/Users/hussainalsabr/Desktop/My Files/Self Development/typescript-projects/Mastering-TypeScript-Fourth-Edition/ch16/shopping-cart/src/App.vue","mtime":1690047611312},{"path":"/Users/hussainalsabr/Desktop/My Files/Self Development/typescript-projects/Mastering-TypeScript-Fourth-Edition/ch16/shopping-cart/node_modules/cache-loader/dist/cjs.js","mtime":1690034489199},{"path":"/Users/hussainalsabr/Desktop/My Files/Self Development/typescript-projects/Mastering-TypeScript-Fourth-Edition/ch16/shopping-cart/node_modules/ts-loader/index.js","mtime":1690034488258},{"path":"/Users/hussainalsabr/Desktop/My Files/Self Development/typescript-projects/Mastering-TypeScript-Fourth-Edition/ch16/shopping-cart/node_modules/cache-loader/dist/cjs.js","mtime":1690034489199},{"path":"/Users/hussainalsabr/Desktop/My Files/Self Development/typescript-projects/Mastering-TypeScript-Fourth-Edition/ch16/shopping-cart/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1690034493078}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgX19kZWNvcmF0ZSwgX19leHRlbmRzIH0gZnJvbSAidHNsaWIiOwppbXBvcnQgeyBWdWUsIE9wdGlvbnMgfSBmcm9tICJ2dWUtY2xhc3MtY29tcG9uZW50IjsKaW1wb3J0IHsgQ2FydENvbGxlY3Rpb24gfSBmcm9tICIuL0NhcnRJdGVtcyI7CmltcG9ydCBTaG9wcGluZ0NhcnQgZnJvbSAiLi9jb21wb25lbnRzL1Nob3BwaW5nQ2FydC52dWUiOwppbXBvcnQgeyBhamF4IH0gZnJvbSAicnhqcy9hamF4IjsKZXhwb3J0IHZhciBtaWNyb0V2ZW50QnVzID0gd2luZG93Lm1pY3JvRXZlbnRCdXM7CnZhciBBcHAgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICBfX2V4dGVuZHMoQXBwLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gQXBwKCkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBBcHAucHJvdG90eXBlLmRhdGEgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8gcmV0dXJuIHsKICAgICAgICAvLyAgICAgY2FydEl0ZW1zOiBzaG9wcGluZ0NhcnRJdGVtcwogICAgICAgIC8vIH0KICAgICAgICByZXR1cm4gewogICAgICAgICAgICBjYXJ0SXRlbXM6IFtdLAogICAgICAgICAgICB1c2VybmFtZTogbnVsbCwKICAgICAgICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgICB9OwogICAgfTsKICAgIEFwcC5wcm90b3R5cGUuaGFuZGxlVXNlckxvZ2dlZEluID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgY29uc29sZS5sb2coIlZVRTogQXBwLmhhbmRsZVVzZXJMb2dnZWRJbiA6ICIgKyBldmVudCk7CiAgICAgICAgdGhpcy51c2VybmFtZSA9IGV2ZW50OwogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgdGhpcy5mZXRjaERhdGEoKTsKICAgIH07CiAgICBBcHAucHJvdG90eXBlLmZldGNoRGF0YSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgIGNvbnNvbGUubG9nKCJjYWxsaW5nIGFqYXggd2l0aCAiICsgdGhpcy51c2VybmFtZSk7CiAgICAgICAgYWpheAogICAgICAgICAgICAuZ2V0SlNPTigiaHR0cHM6Ly9uNTVqcmo2bnJhLmV4ZWN1dGUtYXBpLnVzLWVhc3QtMS5hbWF6b25hd3MuY29tL1Byb2QvY2FydHMvIiArIHRoaXMudXNlcm5hbWUpCiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coImNhcnQgbG9hZGVkIGZyb20gQVBJIik7CiAgICAgICAgICAgIHZhciBjYXJ0SXRlbXMgPSBuZXcgQ2FydENvbGxlY3Rpb24oKTsKICAgICAgICAgICAgY2FydEl0ZW1zLml0ZW1zID0gZGF0YTsKICAgICAgICAgICAgX3RoaXMuY2FydEl0ZW1zID0gY2FydEl0ZW1zOwogICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJWVUU6IGdldCAvY2FydHMvKHVzZXJuYW1lKSBlcnJvciA6ICIgKyBlcnJvcik7CiAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgIH07CiAgICBBcHAucHJvdG90eXBlLmhhbmRsZUFkZEl0ZW1Ub0NhcnQgPSBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgY29uc29sZS5sb2coImhhbmRsZUFkZEl0ZW1Ub0NhcnQgOiBpdGVtIDogIiArIEpTT04uc3RyaW5naWZ5KGRhdGEpKTsKICAgICAgICBjb25zb2xlLmxvZygiY2FsbGluZyBHRVQgb24gL3Byb2R1Y3RzLyIgKyBkYXRhLnByb2R1Y3RJZCk7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICBhamF4CiAgICAgICAgICAgICAgICAuZ2V0SlNPTigiaHR0cHM6Ly9uNTVqcmo2bnJhLmV4ZWN1dGUtYXBpLnVzLWVhc3QtMS5hbWF6b25hd3MuY29tL1Byb2QvcHJvZHVjdHMvIiArIGRhdGEucHJvZHVjdElkKQogICAgICAgICAgICAgICAgLnN1YnNjcmliZShmdW5jdGlvbiAocHJvZHVjdCkgewogICAgICAgICAgICAgICAgdmFyIHByb2R1Y3RJdGVtID0gcHJvZHVjdDsKICAgICAgICAgICAgICAgIHByb2R1Y3RJdGVtLmFtb3VudCA9IHBhcnNlSW50KGRhdGEuYW1vdW50KTsKICAgICAgICAgICAgICAgIF90aGlzLmNhcnRJdGVtcy5pdGVtcy5wdXNoKHByb2R1Y3RJdGVtKTsKICAgICAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiVlVFOiBwcm9kdWN0cy8iICsgZGF0YS5wcm9kdWN0SWQgKyAiIDogZXJyb3IgIiArIGVycm9yKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwgMjAwKTsKICAgIH07CiAgICBBcHAucHJvdG90eXBlLm9uVXBkYXRlQ2FydCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgIGNvbnNvbGUubG9nKCJBcHAub25VcGRhdGVDYXJ0Iik7CiAgICAgICAgdmFyIHBvc3RCb2R5ID0gdGhpcy5jYXJ0SXRlbXMuZ2V0Q2FydEl0ZW1zUG9zdERhdGEoKTsKICAgICAgICBjb25zb2xlLmxvZygicG9zdEJvZHkgOiAiICsgSlNPTi5zdHJpbmdpZnkocG9zdEJvZHkpKTsKICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgIGFqYXgKICAgICAgICAgICAgLnBvc3QoImh0dHBzOi8vbjU1anJqNm5yYS5leGVjdXRlLWFwaS51cy1lYXN0LTEuYW1hem9uYXdzLmNvbS9Qcm9kL2NhcnRzLyIgKyB0aGlzLnVzZXJuYW1lLCBKU09OLnN0cmluZ2lmeShwb3N0Qm9keSkpCiAgICAgICAgICAgIC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygicG9zdCBzdWNjZWVkZWQiKTsKICAgICAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICBjb25zb2xlLmxvZygiVlVFOiBwb3N0IHRvIC9jYXJkcy97dXNlcm5hbWV9IGZhaWxlZCA6IGVycm9yIDogIiArIGVycm9yKTsKICAgICAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgfTsKICAgIEFwcCA9IF9fZGVjb3JhdGUoWwogICAgICAgIE9wdGlvbnMoewogICAgICAgICAgICBjb21wb25lbnRzOiB7CiAgICAgICAgICAgICAgICBTaG9wcGluZ0NhcnQ6IFNob3BwaW5nQ2FydCwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbW91bnRlZDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlZVRTogQXBwOm1vdW50ZWQoKSIpOwogICAgICAgICAgICAgICAgbWljcm9FdmVudEJ1cy5vbigiYWRkLXVzZXItY2FydC1pdGVtIikuc3Vic2NyaWJlKHRoaXMuaGFuZGxlQWRkSXRlbVRvQ2FydCk7CiAgICAgICAgICAgICAgICBtaWNyb0V2ZW50QnVzLm9uKCJ1c2VyLWxvZ2dlZC1pbiIpLnN1YnNjcmliZSh0aGlzLmhhbmRsZVVzZXJMb2dnZWRJbik7CiAgICAgICAgICAgIH0sCiAgICAgICAgfSkKICAgIF0sIEFwcCk7CiAgICByZXR1cm4gQXBwOwp9KFZ1ZSkpOwpleHBvcnQgZGVmYXVsdCBBcHA7Cg=="},{"version":3,"file":"/Users/hussainalsabr/Desktop/My Files/Self Development/typescript-projects/Mastering-TypeScript-Fourth-Edition/ch16/shopping-cart/src/App.vue.ts","sourceRoot":"","sources":["/Users/hussainalsabr/Desktop/My Files/Self Development/typescript-projects/Mastering-TypeScript-Fourth-Edition/ch16/shopping-cart/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hussainalsabr/Desktop/My Files/Self Development/typescript-projects/Mastering-TypeScript-Fourth-Edition/ch16/shopping-cart/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/hussainalsabr/Desktop/My Files/Self Development/typescript-projects/Mastering-TypeScript-Fourth-Edition/ch16/shopping-cart/src/App.vue?vue&type=script&lang=ts"],"names":[],"mappings":"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","sourcesContent":["\nimport { Vue, Options } from \"vue-class-component\";\nimport { CartCollection, IProduct } from \"./CartItems\";\nimport ShoppingCart from \"./components/ShoppingCart.vue\";\nimport { ajax } from \"rxjs/ajax\";\nimport { MicroEventBus } from \"micro-event-bus\";\nexport let microEventBus: MicroEventBus = (window as any).microEventBus;\n\n// let shoppingCartItems = new CartCollection();\n\ninterface IItemData {\n  username: string;\n  productId: number;\n  amount: string;\n}\n\n@Options({\n  components: {\n    ShoppingCart,\n  },\n  mounted() {\n    console.log(`VUE: App:mounted()`);\n    microEventBus.on(\"add-user-cart-item\").subscribe(this.handleAddItemToCart);\n\n    microEventBus.on(\"user-logged-in\").subscribe(this.handleUserLoggedIn);\n  },\n})\nexport default class App extends Vue {\n  cartItems!: CartCollection;\n  username!: string;\n  loading: boolean = false;\n  data() {\n    // return {\n    //     cartItems: shoppingCartItems\n    // }\n    return {\n      cartItems: [],\n      username: null,\n      loading: true,\n    };\n  }\n  handleUserLoggedIn(event: string) {\n    console.log(`VUE: App.handleUserLoggedIn : ${event}`);\n    this.username = event;\n    this.loading = true;\n    this.fetchData();\n  }\n\n  fetchData() {\n    console.log(`calling ajax with ${this.username}`);\n    ajax\n      .getJSON(\n        `https://n55jrj6nra.execute-api.us-east-1.amazonaws.com/Prod/carts/${this.username}`\n      )\n      .subscribe(\n        (data) => {\n          console.log(`cart loaded from API`);\n          let cartItems = new CartCollection();\n          cartItems.items = <IProduct[]>data;\n          this.cartItems = cartItems;\n          this.loading = false;\n        },\n        (error) => {\n          console.log(`VUE: get /carts/(username) error : ${error}`);\n          this.loading = false;\n        }\n      );\n  }\n\n  handleAddItemToCart(data: IItemData) {\n    console.log(`handleAddItemToCart : item : ${JSON.stringify(data)}`);\n    console.log(`calling GET on /products/${data.productId}`);\n    setTimeout(() => {\n      this.loading = true;\n      ajax\n        .getJSON(\n          `https://n55jrj6nra.execute-api.us-east-1.amazonaws.com/Prod/products/${data.productId}`\n        )\n        .subscribe(\n          (product) => {\n            let productItem = <IProduct>product;\n            productItem.amount = parseInt(data.amount);\n            this.cartItems.items.push(productItem);\n            this.loading = false;\n          },\n          (error) => {\n            console.log(`VUE: products/${data.productId} : error ${error}`);\n          }\n        );\n    }, 200);\n  }\n\n  onUpdateCart() {\n    console.log(`App.onUpdateCart`);\n    let postBody = this.cartItems.getCartItemsPostData();\n    console.log(`postBody : ${JSON.stringify(postBody)}`);\n    this.loading = true;\n    ajax\n      .post(\n        `https://n55jrj6nra.execute-api.us-east-1.amazonaws.com/Prod/carts/${this.username}`,\n        JSON.stringify(postBody)\n      )\n      .subscribe(\n        () => {\n          console.log(`post succeeded`);\n          this.loading = false;\n        },\n        (error) => {\n          console.log(\n            `VUE: post to /cards/{username} failed : error : ${error}`\n          );\n          this.loading = false;\n        }\n      );\n  }\n}\n"]}]}